<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Calc for Cricut ‚Äî Wireframes v2</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    :root {
      --primary: #7A9A7D;
      --primary-light: #9DB5A0;
      --primary-dark: #4A5D4C;
      --accent: #E8B4B8;
      --accent-warm: #D4A5A5;
      --gold: #C9A962;
      --gold-light: #E8D5A3;
      --bg: #FDFBF9;
      --card: #FFFFFF;
      --text: #3A3A3A;
      --text-dark: #2A2A2A;
      --text-light: #6B6B6B;
      --border: #EBE6E1;
      --shadow-soft: 0 4px 20px rgba(0,0,0,0.06);
      --shadow-medium: 0 8px 30px rgba(0,0,0,0.08);
      --radius: 20px;
      --radius-sm: 14px;
    }
    
    /* Dark Mode */
    body.dark-mode {
      --bg: #1A1A1A;
      --card: #2A2A2A;
      --text: #E5E5E5;
      --text-dark: #FFFFFF;
      --text-light: #999999;
      --border: #3A3A3A;
      --shadow-soft: 0 4px 20px rgba(0,0,0,0.3);
      --shadow-medium: 0 8px 30px rgba(0,0,0,0.4);
    }
    
    body.dark-mode .header {
      background: #2A2A2A;
    }
    
    body.dark-mode .slide-menu {
      background: #2A2A2A;
    }
    
    body.dark-mode .onboarding {
      background: linear-gradient(165deg, #2A2A2A 0%, #1A1A1A 100%);
    }
    
    body.dark-mode .quick-card.featured {
      background: linear-gradient(145deg, var(--primary-dark), var(--primary));
    }
    
    body.dark-mode .calc-result {
      background: linear-gradient(145deg, var(--primary-dark), var(--primary));
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      font-size: 16px;
      line-height: 1.5;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .phone-frame {
      max-width: 390px;
      margin: 0 auto;
      min-height: 100vh;
      background: var(--bg);
      position: relative;
      padding-bottom: 24px;
    }
    
    .screen {
      display: none;
      padding: 20px;
      padding-top: 70px;
      animation: fadeIn 0.25s ease;
    }
    
    .screen.active {
      display: block !important;
    }
    
    .screen:first-of-type {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .header {
      position: -webkit-sticky;
      position: sticky;
      top: 0;
      background: var(--primary);
      color: white;
      padding: 20px 24px;
      z-index: 100;
      margin: -20px -20px 24px -20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .header-left h1 {
      font-size: 24px;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    
    .header-left .header-subtitle {
      font-size: 14px;
      opacity: 0.85;
      margin-top: 4px;
      font-weight: 500;
    }
    
    .hamburger-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: rgba(255,255,255,0.15);
      border: none;
      color: white;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .hamburger-btn:active {
      background: rgba(255,255,255,0.25);
    }
    
    /* Slide-out Menu */
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 200;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.open {
      opacity: 1;
      visibility: visible;
    }
    
    .slide-menu {
      position: fixed;
      top: 0;
      right: -280px;
      width: 280px;
      height: 100%;
      background: var(--card);
      z-index: 201;
      transition: right 0.3s ease;
      padding: 24px;
      box-shadow: -4px 0 24px rgba(0,0,0,0.15);
    }
    
    .menu-overlay.open .slide-menu {
      right: 0;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }
    
    .menu-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }
    
    .menu-close {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--bg);
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      border-radius: 14px;
      cursor: pointer;
      transition: background 0.15s;
      margin-bottom: 8px;
    }
    
    .menu-item:active, .menu-item.active {
      background: var(--bg);
    }
    
    .menu-item.active {
      background: rgba(122,154,125,0.15);
    }
    
    .menu-item-icon {
      font-size: 24px;
    }
    
    .menu-item-text h4 {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-dark);
    }
    
    .menu-item-text p {
      font-size: 13px;
      color: var(--text-light);
    }
    
    .menu-item.active .menu-item-text h4 {
      color: var(--primary-dark);
    }
    
    .search-box {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 14px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 28px;
      border: 1.5px solid var(--border);
      transition: all 0.25s ease;
    }
    
    .search-box:focus-within {
      border-color: var(--primary);
      box-shadow: var(--shadow-medium);
    }
    
    .search-icon { font-size: 20px; color: var(--text-light); }
    
    .search-box input {
      flex: 1;
      border: none;
      font-size: 16px;
      outline: none;
      background: transparent;
      color: var(--text);
    }
    
    .search-box input::placeholder { color: var(--text-light); }
    
    .voice-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary);
      border: none;
      color: white;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .section-title {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .section-title .clear-btn {
      font-size: 12px;
      color: var(--primary);
      text-transform: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .quick-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
      margin-bottom: 32px;
    }
    
    .quick-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px 18px;
      text-align: center;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1.5px solid var(--border);
    }
    
    .quick-card:active {
      transform: scale(0.97);
      box-shadow: var(--shadow-medium);
    }
    
    .quick-card.featured {
      background: linear-gradient(145deg, var(--primary-dark), var(--primary));
      color: white;
      border: none;
      box-shadow: 0 8px 24px rgba(74,93,76,0.25);
    }
    
    .quick-card.featured .quick-card-subtitle {
      color: rgba(255,255,255,0.8);
    }
    
    .quick-card-icon { font-size: 36px; margin-bottom: 12px; }
    .quick-card-title { font-size: 16px; font-weight: 800; letter-spacing: -0.3px; }
    .quick-card-subtitle { font-size: 13px; color: var(--text-light); margin-top: 6px; font-weight: 500; }
    
    .recent-list { display: flex; flex-direction: column; gap: 10px; }
    
    .recent-item {
      background: var(--card);
      border-radius: var(--radius-sm);
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      cursor: pointer;
      transition: background 0.15s;
    }
    
    .recent-item:active { background: #f5f5f0; }
    
    .recent-info { display: flex; align-items: center; gap: 12px; }
    
    .recent-icon {
      width: 44px;
      height: 44px;
      background: var(--primary);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    }
    
    .recent-icon.vinyl { background: #E8B4B8; }
    .recent-icon.htv { background: #D4A5A5; }
    .recent-icon.paper { background: #9DB5A0; }
    
    .recent-text h4 { font-size: 15px; font-weight: 600; }
    .recent-text p { font-size: 14px; color: var(--text-light); }
    .recent-arrow { color: var(--text-light); font-size: 20px; }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      max-width: 390px;
      margin: 0 auto;
      background: var(--card);
      display: flex;
      justify-content: space-around;
      padding: 12px 0 28px;
      box-shadow: 0 -4px 24px rgba(0,0,0,0.08);
      z-index: 100;
      border-top: 1px solid var(--border);
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: 14px;
      transition: all 0.2s ease;
    }
    
    .nav-item:active { background: rgba(74,93,76, 0.08); }
    .nav-item.active .nav-icon { color: var(--primary-dark); transform: scale(1.1); }
    .nav-item.active .nav-label { color: var(--primary-dark); font-weight: 700; }
    .nav-icon { font-size: 26px; color: var(--text-light); transition: all 0.2s ease; }
    .nav-label { font-size: 11px; font-weight: 500; color: var(--text-light); }
    
    /* Results Screen */
    .result-header {
      background: linear-gradient(145deg, var(--primary-dark), var(--primary));
      color: white;
      padding: 36px 28px;
      margin: -20px -20px 24px -20px;
      margin-top: -70px;
      padding-top: 90px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(74,93,76,0.2);
    }
    
    .result-material { font-size: 14px; opacity: 0.8; margin-bottom: 4px; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }
    .result-title { font-size: 22px; font-weight: 600; margin-bottom: 8px; opacity: 0.95; }
    
    .temp-display {
      font-size: 88px;
      font-weight: 800;
      line-height: 1;
      margin: 20px 0;
      letter-spacing: -4px;
    }
    
    .temp-unit { font-size: 36px; font-weight: 700; }
    
    .screen-toggle {
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      padding: 8px 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      margin-top: 12px;
      cursor: pointer;
    }
    
    .screen-toggle.active {
      background: rgba(255,255,255,0.95);
      color: var(--primary);
      font-weight: 600;
    }
    
    .settings-row {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 20px;
    }
    
    .setting-pill {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px 24px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    
    .setting-pill-value { font-size: 24px; font-weight: 700; color: var(--primary); }
    .setting-pill-label { font-size: 12px; color: var(--text-light); margin-top: 4px; text-transform: uppercase; }
    
    .timer-btn {
      width: 100%;
      background: linear-gradient(145deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: var(--radius);
      padding: 20px;
      font-size: 18px;
      font-weight: 800;
      color: var(--text-dark);
      cursor: pointer;
      margin: 24px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      box-shadow: 0 6px 20px rgba(201,169,98,0.35);
      letter-spacing: -0.3px;
    }
    
    .timer-btn:active { transform: scale(0.98); box-shadow: 0 4px 12px rgba(201,169,98,0.4); }
    
    .tips-section {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    
    .tips-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .tip-item {
      display: flex;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
    }
    
    .tip-item:last-child { border-bottom: none; padding-bottom: 0; }
    .tip-bullet { color: var(--accent); font-size: 18px; }
    
    /* Calculator Tabs */
    .calc-tabs {
      display: flex;
      background: var(--card);
      border-radius: var(--radius);
      padding: 4px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    
    .calc-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-light);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .calc-tab.active {
      background: var(--primary);
      color: white;
      box-shadow: 0 2px 8px rgba(122,154,125,0.3);
    }
    
    .tab-panel {
      display: none;
      animation: fadeIn 0.2s ease;
    }
    
    .tab-panel.active {
      display: block;
    }
    
    .calc-section {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
    }
    
    .calc-title { font-size: 14px; font-weight: 700; margin-bottom: 18px; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-light); }
    
    .calc-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }
    
    .calc-row:last-child { margin-bottom: 0; }
    .calc-label { font-size: 15px; color: var(--text); }
    .calc-value { font-size: 16px; font-weight: 600; color: var(--text); }
    
    .cost-input {
      width: 80px;
      padding: 10px 12px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-dark);
      text-align: right;
      background: var(--bg);
      transition: all 0.2s ease;
    }
    
    .cost-input:focus {
      outline: none;
      border-color: var(--primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(122,154,125,0.15);
    }
    
    .cost-input.small {
      width: 50px;
      padding: 8px 10px;
      text-align: center;
    }
    
    /* Slider */
    .slider-container {
      padding: 10px 0;
    }
    
    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .slider-labels span { font-size: 13px; color: var(--text-light); }
    .slider-value { font-size: 28px; font-weight: 800; color: var(--primary); }
    
    .slider-track {
      position: relative;
      height: 44px;
      display: flex;
      align-items: center;
    }
    
    .slider-input {
      width: 100%;
      height: 12px;
      -webkit-appearance: none;
      background: var(--border);
      border-radius: 6px;
      outline: none;
    }
    
    .slider-input::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 32px;
      height: 32px;
      background: var(--primary);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(157,181,160,0.4);
    }
    
    .slider-presets {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
      gap: 8px;
    }
    
    .preset-btn {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 2px solid var(--border);
      background: white;
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .preset-btn.active {
      border-color: var(--primary);
      background: rgba(157,181,160,0.1);
      color: var(--primary);
    }
    
    .calc-result {
      background: linear-gradient(145deg, var(--primary-dark), var(--primary));
      border-radius: var(--radius);
      padding: 28px;
      color: white;
      text-align: center;
      margin-bottom: 20px;
      box-shadow: 0 8px 24px rgba(74,93,76,0.25);
    }
    
    .calc-result-label { font-size: 14px; opacity: 0.85; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }
    .calc-result-value { font-size: 52px; font-weight: 800; margin: 12px 0; letter-spacing: -2px; }
    .calc-result-sub { font-size: 15px; opacity: 0.9; font-weight: 500; }
    
    .save-btn {
      width: 100%;
      background: var(--card);
      border: 2px solid var(--primary);
      border-radius: var(--radius);
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      color: var(--primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 16px;
    }
    
    /* Pricing Tiers */
    .tier-card {
      background: var(--bg);
      border-radius: var(--radius-sm);
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .tier-card:last-child { margin-bottom: 0; }
    .tier-info h4 { font-size: 15px; font-weight: 600; }
    .tier-info p { font-size: 13px; color: var(--text-light); }
    .tier-price { font-size: 22px; font-weight: 700; color: var(--primary); }
    .tier-price.muted { color: var(--text-light); }
    
    /* Collapsible Guide */
    .guide-section {
      background: linear-gradient(135deg, #FDF2F3, #F9E8E9);
      border: 2px solid rgba(232,180,184,0.4);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 16px;
    }
    
    .guide-header {
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    
    .guide-header h3 {
      font-size: 16px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .guide-toggle {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(232,180,184,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: transform 0.2s;
    }
    
    .guide-content {
      padding: 0 20px 20px;
    }
    
    .guide-card {
      background: white;
      border-radius: var(--radius-sm);
      padding: 14px;
      margin-bottom: 12px;
    }
    
    .guide-card:last-child { margin-bottom: 0; }
    .guide-card h4 { font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 8px; }
    .guide-card p { font-size: 14px; line-height: 1.6; }
    
    .stat-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      font-size: 14px;
    }
    
    .stat-row span:last-child { font-weight: 600; }
    
    /* Community Insight */
    .insight-card {
      background: linear-gradient(135deg, rgba(157,181,160,0.15), rgba(232,180,184,0.15));
      border-radius: var(--radius);
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 14px;
    }
    
    .insight-icon { font-size: 32px; }
    .insight-text h4 { font-size: 14px; font-weight: 600; }
    .insight-text p { font-size: 14px; color: var(--text-light); }
    .insight-text strong { color: var(--primary); }
    
    /* Settings */
    .settings-section { margin-bottom: 24px; }
    
    .settings-item {
      background: var(--card);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
    }
    
    .settings-item:first-child { border-radius: var(--radius) var(--radius) 0 0; }
    .settings-item:last-child { border-radius: 0 0 var(--radius) var(--radius); border-bottom: none; }
    .settings-item:only-child { border-radius: var(--radius); }
    
    .settings-left { display: flex; align-items: center; gap: 14px; }
    .settings-icon { font-size: 24px; }
    .settings-text h4 { font-size: 16px; font-weight: 500; }
    .settings-text p { font-size: 14px; color: var(--text-light); }
    
    .toggle {
      width: 52px;
      height: 32px;
      background: var(--border);
      border-radius: 16px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .toggle.on { background: var(--primary); }
    
    .toggle::after {
      content: '';
      position: absolute;
      width: 26px;
      height: 26px;
      background: white;
      border-radius: 13px;
      top: 3px;
      left: 3px;
      transition: transform 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
    
    .toggle.on::after { transform: translateX(20px); }
    .chevron { color: var(--text-light); font-size: 20px; }
    
    .pro-banner {
      background: linear-gradient(145deg, var(--gold), var(--gold-light));
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 28px;
      box-shadow: 0 8px 24px rgba(201,169,98,0.25);
    }
    
    .pro-badge {
      display: inline-block;
      background: rgba(255,255,255,0.4);
      padding: 5px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 800;
      margin-bottom: 10px;
      letter-spacing: 0.5px;
      color: var(--text-dark);
    }
    
    .pro-title { font-size: 20px; font-weight: 800; margin-bottom: 6px; color: var(--text-dark); }
    .pro-text { font-size: 14px; color: var(--text); font-weight: 500; }
    
    /* Onboarding */
    .onboarding {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      max-width: 390px;
      margin: 0 auto;
      background: linear-gradient(165deg, var(--primary-dark) 0%, var(--primary) 100%);
      z-index: 200;
      display: flex;
      flex-direction: column;
      color: white;
      padding: 60px 36px 44px;
    }
    
    .onboarding.hidden { display: none; }
    
    .onboarding-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    
    .onboarding-icon { font-size: 88px; margin-bottom: 36px; }
    .onboarding-title { font-size: 32px; font-weight: 800; margin-bottom: 18px; letter-spacing: -0.5px; }
    .onboarding-text { font-size: 17px; opacity: 0.9; line-height: 1.7; max-width: 290px; font-weight: 500; }
    
    .onboarding-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 30px;
    }
    
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
    }
    
    .dot.active { background: white; width: 24px; border-radius: 5px; }
    
    .onboarding-btn {
      width: 100%;
      background: linear-gradient(145deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: var(--radius);
      padding: 20px;
      font-size: 18px;
      font-weight: 800;
      color: var(--text-dark);
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(201,169,98,0.4);
    }
    
    .skip-btn {
      background: transparent;
      border: none;
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      margin-top: 18px;
      cursor: pointer;
      font-weight: 500;
    }
    
    .screen-indicator {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 500;
      z-index: 150;
    }
    
    /* Tutorial Overlay */
    .tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.75);
      z-index: 300;
      display: none;
      align-items: flex-end;
      justify-content: center;
      padding: 24px;
    }
    
    .tutorial-overlay.active {
      display: flex;
    }
    
    .tutorial-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 28px;
      max-width: 340px;
      width: 100%;
      text-align: center;
      position: relative;
      animation: slideUp 0.3s ease;
    }
    
    .tutorial-skip {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 14px;
      cursor: pointer;
    }
    
    .tutorial-card h3 {
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 12px;
      color: var(--text-dark);
    }
    
    .tutorial-card p {
      font-size: 16px;
      color: var(--text);
      line-height: 1.6;
      margin-bottom: 24px;
    }
    
    .tutorial-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .tutorial-footer span {
      font-size: 13px;
      color: var(--text-light);
    }
    
    .tutorial-footer button {
      background: linear-gradient(145deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: 12px;
      padding: 14px 28px;
      font-size: 16px;
      font-weight: 700;
      color: var(--text-dark);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="phone-frame">
    <div class="screen-indicator">Tap ‚ò∞ menu to navigate</div>
    
    <!-- Onboarding -->
    <div class="onboarding" id="onboarding">
      <div class="onboarding-content" id="onboarding-content">
        <div class="onboarding-icon">üå°Ô∏è</div>
        <h2 class="onboarding-title">Perfect Heat Settings</h2>
        <p class="onboarding-text">Get the exact temperature, time, and pressure for any HTV or iron-on project.</p>
      </div>
      <div class="onboarding-dots">
        <div class="dot active" id="dot1"></div>
        <div class="dot" id="dot2"></div>
        <div class="dot" id="dot3"></div>
      </div>
      <button class="onboarding-btn" onclick="nextOnboarding()">Next</button>
      <button class="skip-btn" onclick="closeOnboarding()">Skip intro</button>
    </div>
    
    <!-- Slide-out Menu -->
    <div class="menu-overlay" id="menu-overlay" onclick="closeMenu()">
      <div class="slide-menu" onclick="event.stopPropagation()">
        <div class="menu-header">
          <h2>Menu</h2>
          <button class="menu-close" onclick="closeMenu()">‚úï</button>
        </div>
        <div class="menu-item active" onclick="navigateTo('home')">
          <span class="menu-item-icon">üè†</span>
          <div class="menu-item-text">
            <h4>Home</h4>
            <p>Dashboard & recent</p>
          </div>
        </div>
        <div class="menu-item" onclick="navigateTo('results')">
          <span class="menu-item-icon">üå°Ô∏è</span>
          <div class="menu-item-text">
            <h4>Heat Guide</h4>
            <p>HTV & iron-on settings</p>
          </div>
        </div>
        <div class="menu-item" onclick="navigateTo('calculator')">
          <span class="menu-item-icon">üí∞</span>
          <div class="menu-item-text">
            <h4>Pricing Calculator</h4>
            <p>Price your crafts</p>
          </div>
        </div>
        <div class="menu-item" onclick="navigateTo('cut-settings')">
          <span class="menu-item-icon">‚úÇÔ∏è</span>
          <div class="menu-item-text">
            <h4>Cut Settings</h4>
            <p>Blade & pressure guide</p>
          </div>
        </div>
        <div class="menu-item" onclick="navigateTo('troubleshoot')">
          <span class="menu-item-icon">üîß</span>
          <div class="menu-item-text">
            <h4>Troubleshoot</h4>
            <p>Fix common issues</p>
          </div>
        </div>
        <div class="menu-item" onclick="navigateTo('settings')">
          <span class="menu-item-icon">‚öôÔ∏è</span>
          <div class="menu-item-text">
            <h4>Settings</h4>
            <p>Preferences & account</p>
          </div>
        </div>
        <div style="border-top: 1px solid var(--border); margin-top: 16px; padding-top: 16px;">
          <div class="menu-item" onclick="startTutorial(); closeMenu();">
            <span class="menu-item-icon">‚ùì</span>
            <div class="menu-item-text">
              <h4>How to Use</h4>
              <p>Quick tutorial</p>
            </div>
          </div>
          <div class="menu-item" style="background: linear-gradient(135deg, rgba(201,169,98,0.15), rgba(232,213,163,0.15));">
            <span class="menu-item-icon">‚≠ê</span>
            <div class="menu-item-text">
              <h4 style="color: var(--gold);">Upgrade to Pro</h4>
              <p>Cloud sync, no ads ‚Ä¢ $4.99/yr</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Screen 1: Home -->
    <div class="screen active" id="home">
      <div class="header">
        <div class="header-left">
          <h1>Calc for Cricut</h1>
          <div class="header-subtitle">Your crafting companion ‚ú®</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" placeholder="Search materials, settings...">
        <button class="voice-btn" title="Voice search">üé§</button>
      </div>
      
      <div class="section-title">Quick Access</div>
      <div class="quick-grid">
        <div class="quick-card featured" onclick="selectHeatMaterial('standard-cotton')">
          <div class="quick-card-icon">üå°Ô∏è</div>
          <div class="quick-card-title">Heat Guide</div>
          <div class="quick-card-subtitle">HTV & Iron-on</div>
        </div>
        <div class="quick-card" onclick="showScreen('calculator')">
          <div class="quick-card-icon">üí∞</div>
          <div class="quick-card-title">Pricing</div>
          <div class="quick-card-subtitle">Profit Calculator</div>
        </div>
        <div class="quick-card" onclick="showScreen('cut-settings')">
          <div class="quick-card-icon">‚úÇÔ∏è</div>
          <div class="quick-card-title">Cut Settings</div>
          <div class="quick-card-subtitle">Blade & Pressure</div>
        </div>
        <div class="quick-card" onclick="showScreen('troubleshoot')">
          <div class="quick-card-icon">üîß</div>
          <div class="quick-card-title">Troubleshoot</div>
          <div class="quick-card-subtitle">Fix Issues</div>
        </div>
      </div>
      
      <div class="section-title">
        Recent
        <span class="clear-btn">Clear All</span>
      </div>
      <div class="recent-list">
        <div class="recent-item" onclick="selectHeatMaterial('glitter-cotton')">
          <div class="recent-info">
            <div class="recent-icon htv">üå°Ô∏è</div>
            <div class="recent-text">
              <h4>Glitter HTV on Cotton</h4>
              <p>320¬∞F ‚Ä¢ 15 sec ‚Ä¢ Medium</p>
            </div>
          </div>
          <span class="recent-arrow">‚Ä∫</span>
        </div>
        <div class="recent-item" onclick="showCutDetail('vinyl')">
          <div class="recent-info">
            <div class="recent-icon vinyl">‚úÇÔ∏è</div>
            <div class="recent-text">
              <h4>Oracal 651 on Glass</h4>
              <p>Fine Point ‚Ä¢ Pressure 3</p>
            </div>
          </div>
          <span class="recent-arrow">‚Ä∫</span>
        </div>
        <div class="recent-item" onclick="showCutDetail('cardstock')">
          <div class="recent-info">
            <div class="recent-icon paper">üìÑ</div>
            <div class="recent-text">
              <h4>65lb Cardstock</h4>
              <p>Fine Point ‚Ä¢ Pressure 2.5</p>
            </div>
          </div>
          <span class="recent-arrow">‚Ä∫</span>
        </div>
      </div>
    </div>
    
    <!-- Screen 2: Heat Guide Results -->
    <div class="screen" id="results">
      <div class="result-header">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
          <button onclick="showScreen('home')" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 10px 16px; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">‚Üê Back</button>
          <button class="hamburger-btn" onclick="openMenu()" style="background: rgba(255,255,255,0.2);">‚ò∞</button>
        </div>
        
        <!-- Material Selector -->
        <div style="margin-bottom: 16px;">
          <select id="htv-material-select" onchange="updateHeatSettings(this.value)" style="width: 100%; padding: 14px 16px; font-size: 16px; font-weight: 600; border: none; border-radius: 12px; background: rgba(255,255,255,0.95); color: var(--text-dark); cursor: pointer; appearance: none; background-image: url('data:image/svg+xml;utf8,<svg fill=\"%233A3A3A\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\"/></svg>'); background-repeat: no-repeat; background-position: right 12px center; background-size: 24px;">
            <optgroup label="Standard HTV">
              <option value="standard-cotton" selected>Standard HTV on Cotton</option>
              <option value="standard-poly">Standard HTV on Polyester</option>
              <option value="standard-blend">Standard HTV on Cotton/Poly Blend</option>
            </optgroup>
            <optgroup label="Glitter HTV">
              <option value="glitter-cotton">Glitter HTV on Cotton</option>
              <option value="glitter-poly">Glitter HTV on Polyester</option>
            </optgroup>
            <optgroup label="Puff / 3D HTV">
              <option value="puff-cotton">Puff HTV on Cotton</option>
              <option value="puff-poly">Puff HTV on Polyester</option>
            </optgroup>
            <optgroup label="Foil HTV">
              <option value="foil-cotton">Foil HTV on Cotton</option>
              <option value="foil-poly">Foil HTV on Polyester</option>
            </optgroup>
            <optgroup label="Holographic HTV">
              <option value="holo-cotton">Holographic HTV on Cotton</option>
              <option value="holo-poly">Holographic HTV on Polyester</option>
            </optgroup>
            <optgroup label="Flock HTV">
              <option value="flock-cotton">Flock HTV on Cotton</option>
            </optgroup>
            <optgroup label="Specialty Fabrics">
              <option value="standard-nylon">Standard HTV on Nylon</option>
              <option value="standard-leather">HTV on Faux Leather</option>
              <option value="standard-canvas">HTV on Canvas</option>
            </optgroup>
          </select>
        </div>
        
        <div class="result-material" id="heat-material-name">Standard HTV on Cotton</div>
        <div class="temp-display"><span id="heat-temp">305</span><span class="temp-unit">¬∞F</span></div>
        <div class="screen-toggle active" onclick="this.classList.toggle('active')">
          üì± Keep Screen On
        </div>
      </div>
      
      <div class="settings-row">
        <div class="setting-pill">
          <div class="setting-pill-value" id="heat-time">15s</div>
          <div class="setting-pill-label">Time</div>
        </div>
        <div class="setting-pill">
          <div class="setting-pill-value" id="heat-pressure">Med</div>
          <div class="setting-pill-label">Pressure</div>
        </div>
        <div class="setting-pill">
          <div class="setting-pill-value" id="heat-peel">Warm</div>
          <div class="setting-pill-label">Peel</div>
        </div>
      </div>
      
      <button class="timer-btn" id="timer-btn">
        <span>‚è±Ô∏è</span> Start <span id="timer-duration">15</span> Second Timer
      </button>
      
      <!-- Sound Test Button -->
      <button onclick="testTimerSound()" style="width: 100%; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 12px; font-size: 14px; color: var(--text-light); cursor: pointer; margin-bottom: 16px;">üîä Test Timer Sound</button>
      
      <div class="tips-section">
        <div class="tips-title">üí° Pro Tips</div>
        <div id="heat-tips">
          <div class="tip-item">
            <span class="tip-bullet">‚ú¶</span>
            <span>Pre-heat garment for 3-5 seconds to remove moisture</span>
          </div>
          <div class="tip-item">
            <span class="tip-bullet">‚ú¶</span>
            <span>Apply firm, even pressure during pressing</span>
          </div>
          <div class="tip-item">
            <span class="tip-bullet">‚ú¶</span>
            <span>Wait 24 hours before first wash</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Screen 3: Calculator -->
    <div class="screen" id="calculator">
      <div class="header">
        <div class="header-left">
          <h1>Profit Calculator</h1>
          <div class="header-subtitle">Price your crafts right üí∞</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      
      <div class="calc-tabs">
        <div class="calc-tab active" data-tab="pricing">Pricing</div>
        <div class="calc-tab" data-tab="materials">Materials</div>
        <div class="calc-tab" data-tab="guide">Guide</div>
      </div>
      
      <!-- TAB: Pricing -->
      <div class="tab-panel active" id="tab-pricing">
      
      <div class="calc-section">
        <div class="calc-title">Your Costs</div>
        <div class="calc-row">
          <span class="calc-label">Materials <span style="color: var(--text-light); font-size: 13px;">(per color)</span></span>
          <input type="text" class="cost-input" value="$8.50" id="materials-cost">
        </div>
        <div class="calc-row">
          <span class="calc-label">Colors / Layers</span>
          <div style="display: flex; align-items: center; gap: 8px;">
            <input type="text" class="cost-input small" value="1" id="num-colors" style="width: 50px;">
            <span style="color: var(--text-light); font-size: 13px;">√ó materials</span>
          </div>
        </div>
        <div class="calc-row">
          <span class="calc-label">Labor</span>
          <div style="display: flex; align-items: center; gap: 8px;">
            <input type="text" class="cost-input small" value="1.5" id="labor-hours" style="width: 50px;"> hrs √ó 
            <input type="text" class="cost-input small" value="$15" id="labor-rate" style="width: 60px;">
          </div>
        </div>
        <div class="calc-row">
          <span class="calc-label">Misc supplies <span style="color: var(--text-light); font-size: 13px;">(blades, mats)</span></span>
          <input type="text" class="cost-input" value="$2.00" id="misc-cost">
        </div>
        <div class="calc-row">
          <span class="calc-label">Equipment overhead</span>
          <div style="display: flex; align-items: center; gap: 6px;">
            <input type="text" class="cost-input small" value="5" id="overhead-pct" style="width: 45px;">
            <span style="color: var(--text-light);">%</span>
          </div>
        </div>
        <div class="calc-row" style="border-top: 2px solid var(--border); padding-top: 14px; margin-top: 10px; background: var(--bg); margin: 10px -24px -24px; padding: 16px 24px; border-radius: 0 0 var(--radius) var(--radius);">
          <span class="calc-label" style="font-weight: 800; color: var(--text-dark);">Total Cost</span>
          <span class="calc-value total-cost" style="font-weight: 800; font-size: 20px; color: var(--primary-dark);">$35.08</span>
        </div>
      </div>
      
      <div class="calc-section">
        <div class="calc-title">Your Margin</div>
        <div class="slider-container">
          <div class="slider-labels">
            <span>0%</span>
            <span class="slider-value">45%</span>
            <span>100%</span>
          </div>
          <div class="slider-track">
            <input type="range" min="0" max="100" value="45" class="slider-input">
          </div>
          <div class="slider-presets">
            <button class="preset-btn">30%</button>
            <button class="preset-btn active">45%</button>
            <button class="preset-btn">60%</button>
          </div>
        </div>
        
        <!-- Community Insight - moved up -->
        <div class="insight-card" style="margin-top: 16px;">
          <div class="insight-icon">üìä</div>
          <div class="insight-text">
            <h4>Community Insight</h4>
            <p>Crafters average <strong>42% margin</strong> on tumblers</p>
          </div>
        </div>
      </div>
      
      <div class="calc-result">
        <div class="calc-result-label">Sell Price</div>
        <div class="calc-result-value">$56.36</div>
        <div class="calc-result-sub">Profit: $25.36 per item</div>
      </div>
      
      <button class="save-btn">
        <span>üíæ</span> Save This Project
      </button>
      
      <div class="calc-section">
        <div class="calc-title">Pricing Tiers</div>
        <div class="tier-card">
          <div class="tier-info">
            <h4>üíº Full Price</h4>
            <p>Customers & strangers</p>
          </div>
          <div class="tier-price">$56.36</div>
        </div>
        <div class="tier-card">
          <div class="tier-info">
            <h4>ü§ù Friends</h4>
            <p>Support your craft (20% off)</p>
          </div>
          <div class="tier-price">$45.09</div>
        </div>
        <div class="tier-card">
          <div class="tier-info">
            <h4>üë®‚Äçüë©‚Äçüëß Family</h4>
            <p>Cover costs + small thank-you</p>
          </div>
          <div class="tier-price">$39.45</div>
        </div>
        <div class="tier-card">
          <div class="tier-info">
            <h4>‚ù§Ô∏è Just Costs</h4>
            <p>Materials + your time</p>
          </div>
          <div class="tier-price muted">$31.00</div>
        </div>
      </div>
      
      </div><!-- /tab-pricing -->
      
      <!-- TAB: Materials -->
      <div class="tab-panel" id="tab-materials">
        <div class="calc-section">
          <div class="calc-title">Project Details</div>
          <div class="calc-row">
            <span class="calc-label">Project type</span>
            <select class="cost-input" style="width: 140px; text-align: left;">
              <option>T-Shirt</option>
              <option>Tumbler</option>
              <option>Tote Bag</option>
              <option>Decal</option>
              <option>Custom</option>
            </select>
          </div>
          <div class="calc-row">
            <span class="calc-label">Design width</span>
            <div style="display: flex; align-items: center; gap: 6px;">
              <input type="text" class="cost-input small" value="10" style="width: 55px;"> in
            </div>
          </div>
          <div class="calc-row">
            <span class="calc-label">Design height</span>
            <div style="display: flex; align-items: center; gap: 6px;">
              <input type="text" class="cost-input small" value="8" style="width: 55px;"> in
            </div>
          </div>
          <div class="calc-row">
            <span class="calc-label">Quantity</span>
            <input type="text" class="cost-input small" value="10" style="width: 55px;">
          </div>
        </div>
        
        <div class="calc-section">
          <div class="calc-title">Material Settings</div>
          <div class="calc-row">
            <span class="calc-label">Vinyl roll width</span>
            <select class="cost-input" style="width: 100px; text-align: left;">
              <option>12 inch</option>
              <option>15 inch</option>
              <option>24 inch</option>
            </select>
          </div>
          <div class="calc-row">
            <span class="calc-label">Cost per foot</span>
            <input type="text" class="cost-input" value="$1.50">
          </div>
          <div class="calc-row">
            <span class="calc-label">Waste allowance</span>
            <div style="display: flex; align-items: center; gap: 6px;">
              <input type="text" class="cost-input small" value="15" style="width: 50px;"> %
            </div>
          </div>
        </div>
        
        <div class="calc-result">
          <div class="calc-result-label">Material Needed</div>
          <div class="calc-result-value">7.7 ft</div>
          <div class="calc-result-sub">~$11.50 in vinyl</div>
        </div>
        
        <div class="insight-card">
          <div class="insight-icon">üí°</div>
          <div class="insight-text">
            <h4>Pro Tip</h4>
            <p>Buy 15% extra for mistakes ‚Äî it's cheaper than reordering!</p>
          </div>
        </div>
      </div><!-- /tab-materials -->
      
      <!-- TAB: Guide -->
      <div class="tab-panel" id="tab-guide">
        <div class="calc-section" style="background: linear-gradient(135deg, #FDF2F3, #F9E8E9); border-color: rgba(232,180,184,0.3);">
          <div style="text-align: center; padding: 10px 0 20px;">
            <div style="font-size: 48px; margin-bottom: 12px;">üíù</div>
            <h3 style="font-size: 22px; font-weight: 800; margin-bottom: 8px;">The "What's Fair?" Guide</h3>
            <p style="color: var(--text-light); font-size: 15px;">Navigating pricing with loved ones</p>
          </div>
        </div>
        
        <div class="calc-section">
          <div style="font-size: 15px; line-height: 1.7; margin-bottom: 16px;">
            Charging family and friends feels awkward ‚Äî <strong>you're not alone</strong>. 78% of crafters struggle with this exact question.
          </div>
          <div class="guide-card" style="background: var(--bg);">
            <h4>‚ú® The Truth</h4>
            <p>Your time has value. Friends who care about your craft <em>want</em> to support it. Charging fairly isn't greedy ‚Äî it's what lets you keep crafting.</p>
          </div>
        </div>
        
        <div class="calc-section">
          <div class="calc-title">Suggested Tiers</div>
          <div class="tier-card">
            <div class="tier-info">
              <h4>üíº Customers</h4>
              <p>Full price ‚Äî they expect it</p>
            </div>
            <div style="color: var(--primary); font-weight: 700;">100%</div>
          </div>
          <div class="tier-card">
            <div class="tier-info">
              <h4>ü§ù Friends</h4>
              <p>"Support your craft" discount</p>
            </div>
            <div style="color: var(--text); font-weight: 700;">80%</div>
          </div>
          <div class="tier-card">
            <div class="tier-info">
              <h4>üë®‚Äçüë©‚Äçüëß Close Family</h4>
              <p>Cover costs + small thank-you</p>
            </div>
            <div style="color: var(--text); font-weight: 700;">70%</div>
          </div>
          <div class="tier-card">
            <div class="tier-info">
              <h4>‚ù§Ô∏è Gifts Only</h4>
              <p>Special occasions, your choice</p>
            </div>
            <div style="color: var(--text-light); font-weight: 700;">Free</div>
          </div>
        </div>
        
        <div class="calc-section">
          <div class="calc-title">What to Say</div>
          <div class="guide-card" style="background: var(--bg); font-style: italic;">
            "I'd love to make this for you! My materials cost about $X ‚Äî would that work? No pressure either way."
          </div>
          <div class="guide-card" style="background: var(--bg); font-style: italic; margin-top: 10px;">
            "I'm trying to turn this into a small business, so I charge friends a little less than my regular price. Would $X work for you?"
          </div>
        </div>
        
        <div class="calc-section">
          <div class="calc-title">What Other Crafters Do</div>
          <div style="font-size: 15px;">
            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border);"><span>Charge full price</span><span style="font-weight: 700;">12%</span></div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border);"><span>Small discount (10-20%)</span><span style="font-weight: 700;">34%</span></div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border);"><span>Cover costs only</span><span style="font-weight: 700;">41%</span></div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0;"><span>Give it free</span><span style="font-weight: 700;">13%</span></div>
          </div>
        </div>
      </div><!-- /tab-guide -->
      
    </div>
    
    <!-- Cut Detail Screen -->
    <div class="screen" id="cut-detail">
      <div class="header">
        <div class="header-left">
          <h1>Cut Settings</h1>
          <div class="header-subtitle">Material details ‚úÇÔ∏è</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      <div id="cut-detail-content"></div>
    </div>
    
    <!-- Tutorial Overlay -->
    <div class="tutorial-overlay" id="tutorial-overlay">
      <div class="tutorial-card">
        <button class="tutorial-skip" onclick="closeTutorial()">Skip</button>
        <h3 id="tutorial-title">Welcome!</h3>
        <p id="tutorial-text">Let me show you around.</p>
        <div class="tutorial-footer">
          <span id="tutorial-progress">1 of 7</span>
          <button id="tutorial-next-btn" onclick="nextTutorial()">Next</button>
        </div>
      </div>
    </div>
    
    <!-- Screen 5: Cut Settings -->
    <div class="screen" id="cut-settings">
      <div class="header">
        <div class="header-left">
          <h1>Cut Settings</h1>
          <div class="header-subtitle">Blade & pressure guide ‚úÇÔ∏è</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" placeholder="Search materials..." id="cut-search">
      </div>
      
      <div class="section-title">Popular Materials</div>
      
      <div class="calc-section" onclick="showCutDetail('vinyl')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Adhesive Vinyl (Oracal 651)</h4>
            <p style="color: var(--text-light); font-size: 14px;">Fine Point Blade ‚Ä¢ Pressure 2-3</p>
          </div>
          <span style="font-size: 20px; color: var(--text-light);">‚Ä∫</span>
        </div>
      </div>
      
      <div class="calc-section" onclick="showCutDetail('htv')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">HTV / Iron-On</h4>
            <p style="color: var(--text-light); font-size: 14px;">Fine Point Blade ‚Ä¢ Pressure 2</p>
          </div>
          <span style="font-size: 20px; color: var(--text-light);">‚Ä∫</span>
        </div>
      </div>
      
      <div class="calc-section" onclick="showCutDetail('cardstock')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Cardstock (65-80lb)</h4>
            <p style="color: var(--text-light); font-size: 14px;">Fine Point Blade ‚Ä¢ Pressure 2.5-3</p>
          </div>
          <span style="font-size: 20px; color: var(--text-light);">‚Ä∫</span>
        </div>
      </div>
      
      <div class="calc-section" onclick="showCutDetail('glitter')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Glitter Cardstock</h4>
            <p style="color: var(--text-light); font-size: 14px;">Deep Point Blade ‚Ä¢ Pressure 3.5</p>
          </div>
          <span style="font-size: 20px; color: var(--text-light);">‚Ä∫</span>
        </div>
      </div>
      
      <div class="calc-section" onclick="showCutDetail('leather')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Faux Leather</h4>
            <p style="color: var(--text-light); font-size: 14px;">Deep Point Blade ‚Ä¢ Pressure 3-4</p>
          </div>
          <span style="font-size: 20px; color: var(--text-light);">‚Ä∫</span>
        </div>
      </div>
      
      <div class="insight-card" style="margin-top: 16px;">
        <div class="insight-icon">üí°</div>
        <div class="insight-text">
          <h4>Pro Tip</h4>
          <p>Always do a test cut! Settings vary by brand and batch.</p>
        </div>
      </div>
    </div>
    
    <!-- Screen 6: Troubleshoot -->
    <div class="screen" id="troubleshoot">
      <div class="header">
        <div class="header-left">
          <h1>Troubleshoot</h1>
          <div class="header-subtitle">Fix common issues üîß</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      
      <div class="section-title">What's happening?</div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">üò´</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Not cutting through</h4>
            <p style="color: var(--text-light); font-size: 14px;">Material isn't fully cut</p>
          </div>
        </div>
      </div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">üò¨</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Tearing / ripping</h4>
            <p style="color: var(--text-light); font-size: 14px;">Material tears during cut</p>
          </div>
        </div>
      </div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">üìê</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Cuts not aligned</h4>
            <p style="color: var(--text-light); font-size: 14px;">Design is off-center or skewed</p>
          </div>
        </div>
      </div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">üîå</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Won't connect</h4>
            <p style="color: var(--text-light); font-size: 14px;">Bluetooth or USB issues</p>
          </div>
        </div>
      </div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">üñ®Ô∏è</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Print then Cut issues</h4>
            <p style="color: var(--text-light); font-size: 14px;">Sensor not reading</p>
          </div>
        </div>
      </div>
      
      <div class="calc-section" style="cursor: pointer;">
        <div style="display: flex; gap: 14px; align-items: center;">
          <span style="font-size: 28px;">‚ö†Ô∏è</span>
          <div>
            <h4 style="font-weight: 700; margin-bottom: 4px;">Error codes</h4>
            <p style="color: var(--text-light); font-size: 14px;">Machine showing an error</p>
          </div>
        </div>
      </div>
      
      <div style="text-align: center; padding: 24px; color: var(--text-light); font-size: 14px;">
        <p>Can't find your issue?</p>
        <button style="margin-top: 12px; padding: 12px 24px; background: var(--card); border: 2px solid var(--primary); border-radius: var(--radius); color: var(--primary); font-weight: 600; cursor: pointer;">Contact Support</button>
      </div>
    </div>
    
    <!-- Screen 4: Settings -->
    <div class="screen" id="settings">
      <div class="header">
        <div class="header-left">
          <h1>Settings</h1>
          <div class="header-subtitle">Customize your experience</div>
        </div>
        <button class="hamburger-btn" onclick="openMenu()">‚ò∞</button>
      </div>
      
      <div class="pro-banner">
        <div class="pro-badge">‚≠ê PRO</div>
        <div class="pro-title">Unlock All Features</div>
        <div class="pro-text">Offline mode, custom materials, no ads ‚Ä¢ $4.99/year</div>
      </div>
      
      <div class="section-title">Display</div>
      <div class="settings-section">
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üì±</span>
            <div class="settings-text">
              <h4>Keep Screen On</h4>
              <p>During heat press countdown</p>
            </div>
          </div>
          <div class="toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üåô</span>
            <div class="settings-text">
              <h4>Dark Mode</h4>
              <p>Easier on the eyes</p>
            </div>
          </div>
          <div class="toggle" id="dark-mode-toggle" onclick="toggleDarkMode()"></div>
        </div>
      </div>
      
      <div class="section-title">Pricing Defaults</div>
      <div class="settings-section">
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üíµ</span>
            <div class="settings-text">
              <h4>My Hourly Rate</h4>
              <p>$15.00 / hour</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üìä</span>
            <div class="settings-text">
              <h4>Default Margin</h4>
              <p>45%</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
      </div>
      
      <div class="section-title">Units</div>
      <div class="settings-section">
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üå°Ô∏è</span>
            <div class="settings-text">
              <h4>Temperature</h4>
              <p>Fahrenheit</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üìè</span>
            <div class="settings-text">
              <h4>Measurements</h4>
              <p>Inches</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
      </div>
      
      <div class="section-title">My Equipment</div>
      <div class="settings-section">
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">‚úÇÔ∏è</span>
            <div class="settings-text">
              <h4>Cricut Model</h4>
              <p>Maker 3</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üî•</span>
            <div class="settings-text">
              <h4>Heat Press</h4>
              <p>EasyPress 2 (12√ó10)</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
      </div>
      
      <div class="section-title">About</div>
      <div class="settings-section">
        <div class="settings-item" onclick="startTutorial()" style="cursor: pointer;">
          <div class="settings-left">
            <span class="settings-icon">‚ùì</span>
            <div class="settings-text">
              <h4>How to Use This App</h4>
              <p>Replay the tutorial</p>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">‚≠ê</span>
            <div class="settings-text">
              <h4>Rate the App</h4>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üí¨</span>
            <div class="settings-text">
              <h4>Send Feedback</h4>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
        <div class="settings-item">
          <div class="settings-left">
            <span class="settings-icon">üîí</span>
            <div class="settings-text">
              <h4>Privacy Policy</h4>
            </div>
          </div>
          <span class="chevron">‚Ä∫</span>
        </div>
      </div>
    </div>
    
  </div>
  
  <script>
    let onboardingStep = 0;
    const onboardingData = [
      { icon: 'üå°Ô∏è', title: 'Perfect Heat Settings', text: 'Get the exact temperature, time, and pressure for any HTV or iron-on project.' },
      { icon: 'üí∞', title: 'Price With Confidence', text: 'Calculate fair prices for your crafts ‚Äî including tips for family & friends.' },
      { icon: '‚ú®', title: 'Join 10,000+ Crafters', text: 'See what margins others use and learn from the community.' }
    ];
    
    function nextOnboarding() {
      onboardingStep++;
      if (onboardingStep >= onboardingData.length) {
        closeOnboarding();
        return;
      }
      updateOnboarding();
    }
    
    function updateOnboarding() {
      const data = onboardingData[onboardingStep];
      document.querySelector('.onboarding-icon').textContent = data.icon;
      document.querySelector('.onboarding-title').textContent = data.title;
      document.querySelector('.onboarding-text').textContent = data.text;
      document.querySelectorAll('.dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === onboardingStep);
      });
      if (onboardingStep === onboardingData.length - 1) {
        document.querySelector('.onboarding-btn').textContent = 'Get Started';
      }
    }
    
    function closeOnboarding() {
      document.getElementById('onboarding').classList.add('hidden');
    }
    
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
      
      // Update menu active state
      document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
    }
    
    // ========================================
    // HAMBURGER MENU
    // ========================================
    
    function openMenu() {
      document.getElementById('menu-overlay').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeMenu() {
      document.getElementById('menu-overlay').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function navigateTo(screenId) {
      showScreen(screenId);
      
      // Update menu active state
      document.querySelectorAll('.menu-item').forEach(item => {
        const itemScreen = item.getAttribute('onclick')?.match(/navigateTo\('(\w+)'\)/)?.[1];
        item.classList.toggle('active', itemScreen === screenId);
      });
      
      closeMenu();
    }
    
    // Pricing Calculator Logic
    function parseNumber(str) {
      return parseFloat(str.replace(/[^0-9.]/g, '')) || 0;
    }
    
    function calculateTotalCost() {
      const materialsPerColor = parseNumber(document.getElementById('materials-cost').value);
      const numColors = parseNumber(document.getElementById('num-colors').value) || 1;
      const laborHours = parseNumber(document.getElementById('labor-hours').value);
      const laborRate = parseNumber(document.getElementById('labor-rate').value);
      const misc = parseNumber(document.getElementById('misc-cost').value);
      const overheadPct = parseNumber(document.getElementById('overhead-pct').value);
      
      const totalMaterials = materialsPerColor * numColors;
      const laborCost = laborHours * laborRate;
      const subtotal = totalMaterials + laborCost + misc;
      const overhead = subtotal * (overheadPct / 100);
      const total = subtotal + overhead;
      
      return total;
    }
    
    function updatePricing(marginPercent) {
      const totalCost = calculateTotalCost();
      const margin = marginPercent / 100;
      const sellPrice = margin >= 1 ? totalCost * 10 : totalCost / (1 - margin);
      const profit = sellPrice - totalCost;
      const friendsPrice = sellPrice * 0.80;
      const familyPrice = sellPrice * 0.70;
      
      // Update total cost display
      document.querySelector('.total-cost').textContent = '$' + totalCost.toFixed(2);
      
      // Update margin display
      document.querySelector('.slider-value').textContent = marginPercent + '%';
      document.querySelector('.calc-result-value').textContent = '$' + sellPrice.toFixed(2);
      document.querySelector('.calc-result-sub').textContent = 'Profit: $' + profit.toFixed(2) + ' per item';
      
      // Update tier prices
      const tierPrices = document.querySelectorAll('.tier-price');
      if (tierPrices.length >= 4) {
        tierPrices[0].textContent = '$' + sellPrice.toFixed(2);
        tierPrices[1].textContent = '$' + friendsPrice.toFixed(2);
        tierPrices[2].textContent = '$' + familyPrice.toFixed(2);
        tierPrices[3].textContent = '$' + totalCost.toFixed(2);
      }
      
      // Update slider track fill
      const slider = document.querySelector('.slider-input');
      slider.style.background = `linear-gradient(to right, var(--primary) ${marginPercent}%, var(--border) ${marginPercent}%)`;
      
      // Update preset buttons
      document.querySelectorAll('.preset-btn').forEach(btn => {
        const btnValue = parseInt(btn.textContent);
        btn.classList.toggle('active', btnValue === marginPercent);
      });
    }
    
    // Cost input listeners
    document.querySelectorAll('.cost-input').forEach(input => {
      input.addEventListener('input', function() {
        const marginValue = parseInt(document.querySelector('.slider-input').value);
        updatePricing(marginValue);
      });
    });
    
    // Slider interactivity
    document.querySelectorAll('.slider-input').forEach(slider => {
      slider.addEventListener('input', function() {
        updatePricing(parseInt(this.value));
      });
    });
    
    // Preset buttons
    document.querySelectorAll('.preset-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const value = parseInt(this.textContent);
        document.querySelector('.slider-input').value = value;
        updatePricing(value);
      });
    });
    
    // Tab switching
    document.querySelectorAll('.calc-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        const tabName = this.dataset.tab;
        
        // Update tab buttons
        document.querySelectorAll('.calc-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Update tab panels
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        document.getElementById('tab-' + tabName).classList.add('active');
      });
    });
    
    // Initialize pricing
    updatePricing(45);
    
    // ========================================
    // MATERIALS CALCULATOR
    // ========================================
    
    function calculateMaterials() {
      const width = parseNumber(document.getElementById('mat-width')?.value || '10');
      const height = parseNumber(document.getElementById('mat-height')?.value || '8');
      const quantity = parseNumber(document.getElementById('mat-qty')?.value || '10');
      const rollWidth = parseNumber(document.getElementById('mat-roll-width')?.value || '12');
      const costPerFoot = parseNumber(document.getElementById('mat-cost-per-foot')?.value || '1.50');
      const wastePct = parseNumber(document.getElementById('mat-waste')?.value || '15');
      
      // Calculate how many cuts fit across the roll
      const cutsPerRow = Math.floor(rollWidth / width) || 1;
      const rowsNeeded = Math.ceil(quantity / cutsPerRow);
      const totalInches = rowsNeeded * height;
      const totalFeet = totalInches / 12;
      const withWaste = totalFeet * (1 + wastePct / 100);
      const totalCost = withWaste * costPerFoot;
      
      // Update display
      const resultValue = document.querySelector('#tab-materials .calc-result-value');
      const resultSub = document.querySelector('#tab-materials .calc-result-sub');
      if (resultValue) resultValue.textContent = withWaste.toFixed(1) + ' ft';
      if (resultSub) resultSub.textContent = '~$' + totalCost.toFixed(2) + ' in vinyl';
      
      // Store for use in pricing tab
      window.calculatedMaterialCost = totalCost;
      
      return { feet: withWaste, cost: totalCost };
    }
    
    // Add IDs to material inputs for calculation
    document.addEventListener('DOMContentLoaded', function() {
      const matInputs = document.querySelectorAll('#tab-materials .cost-input, #tab-materials select');
      const ids = ['mat-type', 'mat-width', 'mat-height', 'mat-qty', 'mat-roll-width', 'mat-cost-per-foot', 'mat-waste'];
      matInputs.forEach((input, i) => {
        if (ids[i]) input.id = ids[i];
        input.addEventListener('input', calculateMaterials);
        input.addEventListener('change', calculateMaterials);
      });
      calculateMaterials();
    });
    
    // ========================================
    // HEAT SETTINGS DATABASE
    // ========================================
    
    const heatSettings = {
      'standard-cotton': { name: 'Standard HTV on Cotton', temp: 305, time: 15, pressure: 'Med', peel: 'Warm', tips: ['Pre-heat garment for 3-5 seconds to remove moisture', 'Apply firm, even pressure during pressing', 'Wait 24 hours before first wash'] },
      'standard-poly': { name: 'Standard HTV on Polyester', temp: 270, time: 10, pressure: 'Light', peel: 'Cold', tips: ['Lower temp to avoid scorching polyester', 'Use pressing pillow for even pressure', 'Let cool completely before peeling'] },
      'standard-blend': { name: 'Standard HTV on Cotton/Poly Blend', temp: 290, time: 12, pressure: 'Med', peel: 'Warm', tips: ['Adjust temp based on poly percentage', 'Pre-press to remove moisture', 'Test on a hidden area first'] },
      'glitter-cotton': { name: 'Glitter HTV on Cotton', temp: 320, time: 15, pressure: 'Med', peel: 'Warm', tips: ['Peel carrier while still warm', 'Cover with parchment and press backside for 5 sec', 'Glitter needs slightly higher temp'] },
      'glitter-poly': { name: 'Glitter HTV on Polyester', temp: 285, time: 12, pressure: 'Light', peel: 'Cold', tips: ['Use lower temp for polyester', 'Press from the back if possible', 'Cover design during pressing'] },
      'puff-cotton': { name: 'Puff HTV on Cotton', temp: 305, time: 15, pressure: 'Light', peel: 'Hot', tips: ['Use LIGHT pressure ‚Äî puff needs room to expand', 'Peel immediately while HOT', 'Do NOT repress ‚Äî it flattens the puff'] },
      'puff-poly': { name: 'Puff HTV on Polyester', temp: 275, time: 12, pressure: 'Light', peel: 'Hot', tips: ['Lower temp for polyester', 'Very light pressure for best puff', 'Peel immediately while hot'] },
      'foil-cotton': { name: 'Foil HTV on Cotton', temp: 300, time: 10, pressure: 'Med', peel: 'Cold', tips: ['Quick press ‚Äî foil scorches easily', 'Let cool completely before peeling', 'Apply adhesive layer first if 2-step foil'] },
      'foil-poly': { name: 'Foil HTV on Polyester', temp: 270, time: 8, pressure: 'Light', peel: 'Cold', tips: ['Lower temp and time for polyester', 'Cool fully before peel', 'Test on scrap fabric first'] },
      'holo-cotton': { name: 'Holographic HTV on Cotton', temp: 315, time: 15, pressure: 'Med', peel: 'Cold', tips: ['Let cool completely before peeling', 'Cover with parchment to protect finish', 'Avoid re-pressing over design'] },
      'holo-poly': { name: 'Holographic HTV on Polyester', temp: 280, time: 12, pressure: 'Light', peel: 'Cold', tips: ['Lower temp for polyester', 'Cool fully before peeling', 'Protect with parchment'] },
      'flock-cotton': { name: 'Flock HTV on Cotton', temp: 305, time: 15, pressure: 'Firm', peel: 'Hot', tips: ['Use FIRM pressure for flock adhesion', 'Peel while still hot', 'Brush flock gently after peeling to raise fibers'] },
      'standard-nylon': { name: 'Standard HTV on Nylon', temp: 250, time: 10, pressure: 'Light', peel: 'Cold', tips: ['Nylon melts easily ‚Äî use LOW temp', 'Test on hidden seam first', 'Use pressing cloth for protection'] },
      'standard-leather': { name: 'HTV on Faux Leather', temp: 255, time: 10, pressure: 'Light', peel: 'Cold', tips: ['Low temp ‚Äî faux leather melts!', 'Press from the BACK if possible', 'No steam, no moisture'] },
      'standard-canvas': { name: 'HTV on Canvas', temp: 330, time: 20, pressure: 'Firm', peel: 'Warm', tips: ['Canvas needs higher temp and longer time', 'Use firm, even pressure', 'Pre-press to flatten texture'] }
    };
    
    let currentHeatTime = 15;
    
    function updateHeatSettings(materialKey) {
      const settings = heatSettings[materialKey];
      if (!settings) return;
      
      currentHeatTime = settings.time;
      
      document.getElementById('heat-material-name').textContent = settings.name;
      document.getElementById('heat-temp').textContent = settings.temp;
      document.getElementById('heat-time').textContent = settings.time + 's';
      document.getElementById('heat-pressure').textContent = settings.pressure;
      document.getElementById('heat-peel').textContent = settings.peel;
      document.getElementById('timer-duration').textContent = settings.time;
      
      // Update tips
      const tipsHtml = settings.tips.map(tip => 
        `<div class="tip-item"><span class="tip-bullet">‚ú¶</span><span>${tip}</span></div>`
      ).join('');
      document.getElementById('heat-tips').innerHTML = tipsHtml;
      
      // Reset timer button if timer was running
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
        resetTimerButton();
      }
    }
    
    function resetTimerButton() {
      const btn = document.getElementById('timer-btn');
      btn.innerHTML = '<span>‚è±Ô∏è</span> Start <span id="timer-duration">' + currentHeatTime + '</span> Second Timer';
      btn.style.background = 'linear-gradient(145deg, var(--gold), var(--gold-light))';
    }
    
    // ========================================
    // HEAT GUIDE TIMER
    // ========================================
    
    let timerInterval = null;
    let timerSeconds = 15;
    let wakeLock = null;
    let audioCtx = null;
    
    function startTimer() {
      const btn = document.getElementById('timer-btn');
      if (timerInterval) {
        // Stop timer
        clearInterval(timerInterval);
        timerInterval = null;
        resetTimerButton();
        timerSeconds = currentHeatTime;
        releaseWakeLock();
        return;
      }
      
      // Start timer
      timerSeconds = currentHeatTime;
      requestWakeLock();
      
      // Initialize audio context on user interaction (required by browsers)
      initAudioContext();
      
      timerInterval = setInterval(() => {
        timerSeconds--;
        btn.innerHTML = '<span>‚è±Ô∏è</span> ' + timerSeconds + 's remaining...';
        btn.style.background = 'linear-gradient(145deg, #E8B4B8, #D4A5A5)';
        
        // Warning beep at 3 seconds
        if (timerSeconds === 3) {
          playBeep(660, 100);
        }
        
        if (timerSeconds <= 0) {
          clearInterval(timerInterval);
          timerInterval = null;
          btn.innerHTML = '<span>‚úÖ</span> Done! Tap to reset';
          btn.style.background = 'linear-gradient(145deg, var(--primary), var(--primary-light))';
          
          // Play completion sound and vibrate
          playTimerSound();
          if (navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 200, 100, 200]);
          
          releaseWakeLock();
        }
      }, 1000);
    }
    
    function initAudioContext() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      if (audioCtx.state === 'suspended') {
        audioCtx.resume();
      }
    }
    
    function playBeep(freq, duration) {
      if (!audioCtx) initAudioContext();
      try {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.frequency.value = freq;
        osc.type = 'sine';
        gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration / 1000);
        osc.start();
        osc.stop(audioCtx.currentTime + duration / 1000);
      } catch(e) { console.log('Audio error:', e); }
    }
    
    function playTimerSound() {
      if (!audioCtx) initAudioContext();
      try {
        // Play a loud, attention-grabbing alarm pattern
        const playTone = (freq, startTime, duration) => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.connect(gain);
          gain.connect(audioCtx.destination);
          osc.frequency.value = freq;
          osc.type = 'square'; // More piercing than sine
          gain.gain.setValueAtTime(0.6, audioCtx.currentTime + startTime);
          gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + startTime + duration);
          osc.start(audioCtx.currentTime + startTime);
          osc.stop(audioCtx.currentTime + startTime + duration);
        };
        
        // Alarm pattern: ascending tones repeated 3x
        for (let i = 0; i < 3; i++) {
          const offset = i * 0.6;
          playTone(880, offset, 0.15);
          playTone(1100, offset + 0.15, 0.15);
          playTone(1320, offset + 0.30, 0.2);
        }
      } catch(e) { console.log('Sound error:', e); }
    }
    
    function testTimerSound() {
      initAudioContext();
      playTimerSound();
      if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
    }
    
    async function requestWakeLock() {
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
        }
      } catch(e) {}
    }
    
    function releaseWakeLock() {
      if (wakeLock) {
        wakeLock.release();
        wakeLock = null;
      }
    }
    
    // Attach timer to button
    document.getElementById('timer-btn')?.addEventListener('click', startTimer);
    
    // Initialize heat settings on page load
    updateHeatSettings('standard-cotton');
    
    // Helper to select material and navigate to heat guide
    function selectHeatMaterial(materialKey) {
      document.getElementById('htv-material-select').value = materialKey;
      updateHeatSettings(materialKey);
      showScreen('results');
    }
    
    // ========================================
    // SCREEN KEEP-ON TOGGLE
    // ========================================
    
    document.querySelector('.screen-toggle')?.addEventListener('click', async function() {
      this.classList.toggle('active');
      if (this.classList.contains('active')) {
        await requestWakeLock();
      } else {
        releaseWakeLock();
      }
    });
    
    // ========================================
    // SAVE PROJECT
    // ========================================
    
    function saveProject() {
      const project = {
        id: Date.now(),
        date: new Date().toLocaleDateString(),
        materials: document.getElementById('materials-cost')?.value || '$0',
        laborHours: document.getElementById('labor-hours')?.value || '0',
        laborRate: document.getElementById('labor-rate')?.value || '$15',
        misc: document.getElementById('misc-cost')?.value || '$0',
        overhead: document.getElementById('overhead-pct')?.value || '5',
        margin: document.querySelector('.slider-input')?.value || '45',
        totalCost: document.querySelector('.total-cost')?.textContent || '$0',
        sellPrice: document.querySelector('.calc-result-value')?.textContent || '$0'
      };
      
      let projects = JSON.parse(localStorage.getItem('craftcalc-projects') || '[]');
      projects.unshift(project);
      projects = projects.slice(0, 10); // Keep last 10
      localStorage.setItem('craftcalc-projects', JSON.stringify(projects));
      
      // Visual feedback
      const btn = document.querySelector('.save-btn');
      const original = btn.innerHTML;
      btn.innerHTML = '<span>‚úÖ</span> Saved!';
      btn.style.background = 'var(--primary)';
      btn.style.color = 'white';
      btn.style.borderColor = 'var(--primary)';
      
      setTimeout(() => {
        btn.innerHTML = original;
        btn.style.background = '';
        btn.style.color = '';
        btn.style.borderColor = '';
      }, 1500);
    }
    
    document.querySelector('.save-btn')?.addEventListener('click', saveProject);
    
    // ========================================
    // SETTINGS PERSISTENCE
    // ========================================
    
    function loadSettings() {
      const settings = JSON.parse(localStorage.getItem('craftcalc-settings') || '{}');
      
      if (settings.hourlyRate) {
        const rateInput = document.getElementById('labor-rate');
        if (rateInput) rateInput.value = settings.hourlyRate;
      }
      
      if (settings.defaultMargin) {
        const slider = document.querySelector('.slider-input');
        if (slider) {
          slider.value = settings.defaultMargin;
          updatePricing(parseInt(settings.defaultMargin));
        }
      }
      
      // Apply toggle states
      document.querySelectorAll('.settings-section .toggle').forEach((toggle, i) => {
        const key = 'toggle-' + i;
        if (settings[key]) toggle.classList.add('on');
        else toggle.classList.remove('on');
      });
    }
    
    function saveSettings() {
      const settings = {
        hourlyRate: document.getElementById('labor-rate')?.value || '$15',
        defaultMargin: document.querySelector('.slider-input')?.value || '45'
      };
      
      document.querySelectorAll('.settings-section .toggle').forEach((toggle, i) => {
        settings['toggle-' + i] = toggle.classList.contains('on');
      });
      
      localStorage.setItem('craftcalc-settings', JSON.stringify(settings));
    }
    
    // Save settings when toggles change
    document.querySelectorAll('.settings-section .toggle').forEach(toggle => {
      toggle.addEventListener('click', () => {
        setTimeout(saveSettings, 100);
      });
    });
    
    // Load settings on start
    loadSettings();
    
    // ========================================
    // DARK MODE
    // ========================================
    
    function toggleDarkMode() {
      const toggle = document.getElementById('dark-mode-toggle');
      toggle.classList.toggle('on');
      document.body.classList.toggle('dark-mode');
      
      // Save preference
      localStorage.setItem('craftcalc-darkmode', document.body.classList.contains('dark-mode'));
    }
    
    // Load dark mode preference
    if (localStorage.getItem('craftcalc-darkmode') === 'true') {
      document.body.classList.add('dark-mode');
      document.getElementById('dark-mode-toggle')?.classList.add('on');
    }
    
    // ========================================
    // CUT SETTINGS DETAIL
    // ========================================
    
    const cutSettings = {
      vinyl: { name: 'Adhesive Vinyl (Oracal 651)', blade: 'Fine Point', pressure: '2-3', speed: 'Fast', multiCut: '1x', tips: ['Use StandardGrip mat', 'Mirror OFF', 'Weed immediately for best results'] },
      htv: { name: 'HTV / Iron-On', blade: 'Fine Point', pressure: '2', speed: 'Fast', multiCut: '1x', tips: ['Use LightGrip mat', 'Mirror ON (always!)', 'Shiny side down on mat'] },
      cardstock: { name: 'Cardstock (65-80lb)', blade: 'Fine Point', pressure: '2.5-3', speed: 'Medium', multiCut: '1x', tips: ['Use LightGrip mat', 'Use brayer for adhesion', 'Score lines: use scoring wheel'] },
      glitter: { name: 'Glitter Cardstock', blade: 'Deep Point', pressure: '3.5', speed: 'Slow', multiCut: '2x', tips: ['Use StrongGrip mat', 'May need multiple passes', 'Clean blade frequently'] },
      leather: { name: 'Faux Leather', blade: 'Deep Point', pressure: '3-4', speed: 'Slow', multiCut: '2x', tips: ['Use StrongGrip mat', 'Place pretty side DOWN', 'Use brayer firmly'] }
    };
    
    function showCutDetail(material) {
      const data = cutSettings[material];
      if (!data) return;
      
      const detail = `
        <div class="calc-section">
          <button onclick="showScreen('cut-settings')" style="background: var(--bg); border: 1px solid var(--border); padding: 10px 16px; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; margin-bottom: 16px;">‚Üê Back to Materials</button>
          <h3 style="font-size: 20px; font-weight: 800; margin-bottom: 20px;">${data.name}</h3>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
            <div style="background: var(--bg); padding: 16px; border-radius: 12px; text-align: center;">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary);">${data.blade}</div>
              <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">BLADE</div>
            </div>
            <div style="background: var(--bg); padding: 16px; border-radius: 12px; text-align: center;">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary);">${data.pressure}</div>
              <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">PRESSURE</div>
            </div>
            <div style="background: var(--bg); padding: 16px; border-radius: 12px; text-align: center;">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary);">${data.speed}</div>
              <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">SPEED</div>
            </div>
            <div style="background: var(--bg); padding: 16px; border-radius: 12px; text-align: center;">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary);">${data.multiCut}</div>
              <div style="font-size: 12px; color: var(--text-light); margin-top: 4px;">MULTI-CUT</div>
            </div>
          </div>
        </div>
        
        <div class="calc-section">
          <div class="calc-title">üí° Pro Tips</div>
          ${data.tips.map(tip => `<div style="display: flex; gap: 10px; padding: 10px 0; border-bottom: 1px solid var(--border);"><span style="color: var(--gold);">‚ú¶</span><span>${tip}</span></div>`).join('')}
        </div>
      `;
      
      document.getElementById('cut-detail-content').innerHTML = detail;
      showScreen('cut-detail');
    }
    
    // ========================================
    // TUTORIAL
    // ========================================
    
    let tutorialStep = 0;
    const tutorialSteps = [
      { title: 'Welcome! üëã', text: 'Let me show you around Calc for Cricut. Tap Next to continue.', highlight: null },
      { title: 'Quick Access', text: 'These cards take you to the main features. Heat Guide is the most popular!', highlight: '.quick-grid' },
      { title: 'Navigation', text: 'Tap the ‚ò∞ menu button (top right) to access all screens anytime.', highlight: '.hamburger-btn' },
      { title: 'Pricing Calculator', text: 'Enter your costs, set your margin, and get instant pricing for customers, friends, and family.', highlight: null },
      { title: 'Heat Guide', text: 'Look up the exact temperature, time, and pressure for any HTV material. The timer even keeps your screen on!', highlight: null },
      { title: 'Save Your Work', text: 'Tap "Save Project" to store your calculations. Access them anytime from the Home screen.', highlight: null },
      { title: 'You\'re Ready! üéâ', text: 'Start by tapping Heat Guide or Pricing Calculator. Happy crafting!', highlight: null }
    ];
    
    function startTutorial() {
      tutorialStep = 0;
      showScreen('home');
      document.getElementById('tutorial-overlay').classList.add('active');
      updateTutorial();
    }
    
    function nextTutorial() {
      tutorialStep++;
      if (tutorialStep >= tutorialSteps.length) {
        closeTutorial();
        return;
      }
      updateTutorial();
    }
    
    function updateTutorial() {
      const step = tutorialSteps[tutorialStep];
      document.getElementById('tutorial-title').textContent = step.title;
      document.getElementById('tutorial-text').textContent = step.text;
      document.getElementById('tutorial-progress').textContent = `${tutorialStep + 1} of ${tutorialSteps.length}`;
      
      if (tutorialStep === tutorialSteps.length - 1) {
        document.getElementById('tutorial-next-btn').textContent = 'Get Started';
      } else {
        document.getElementById('tutorial-next-btn').textContent = 'Next';
      }
    }
    
    function closeTutorial() {
      document.getElementById('tutorial-overlay').classList.remove('active');
      localStorage.setItem('craftcalc-tutorial-seen', 'true');
    }
    
    // Show tutorial for first-time users (after onboarding)
    function checkTutorial() {
      if (!localStorage.getItem('craftcalc-tutorial-seen')) {
        setTimeout(startTutorial, 500);
      }
    }
    
    // ========================================
    // USE MATERIAL COST IN PRICING
    // ========================================
    
    document.querySelector('[data-tab="pricing"]')?.addEventListener('click', function() {
      if (window.calculatedMaterialCost > 0) {
        const matInput = document.getElementById('materials-cost');
        if (matInput && confirm('Use calculated material cost ($' + window.calculatedMaterialCost.toFixed(2) + ') from Materials tab?')) {
          matInput.value = '$' + window.calculatedMaterialCost.toFixed(2);
          updatePricing(parseInt(document.querySelector('.slider-input').value));
        }
      }
    });
    
  </script>
</body>
</html>
